@model OneHourSport.Web.Models.Field.FieldDetailsViewModel
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="container">
    <div class="row text-center">
        <br />
        <div class="myBox container">
            <div class="row text-center profileBackground">
                Sport Field - @Model.Name
            </div>
            @Html.Partial("_ListPicturesPartial", Model.Pictures)
            <br />
            <div class="row">
                <hr />
                <div class="col-md-4 text-center col-md-offset-4 profileBackground">
                    Information
                </div>
            </div>
            <div class="row">
                <hr />
                <div class="col-md-6">
                    <div class="row">
                        @Html.Label("Name:")
                        @Html.DisplayFor(x => x.Name)
                    </div>
                    <div class="row">
                        @Html.Label("Category:")
                        @Html.DisplayFor(x => x.Category)
                    </div>
                    <div class="row">
                        @Html.Label("A part of:")
                        @Html.ActionLink(Model.SportComplex.Name, "ComplexDetails", "Complex", new { id = Model.SportComplex.Id }, null)
                    </div>
                    <div class="row">
                        @Html.Label("Price per hour:")
                        @Html.DisplayFor(x => x.PricePerHour) lv
                    </div>
                </div>
                <div class="col-md-6 text-center">
                    <div class="row">
                        <div class="col-md-4 text-center col-md-offset-4 profileBackground">
                            Description
                        </div>
                    </div>
                    <p>
                        <span style="width: 10em; word-wrap: break-word;">
                            @Html.DisplayTextFor(m => m.Description)
                        </span>
                    </p>
                </div>
            </div>
            <div class="row text-center menuHoursBackground">
                <button id="shedule">Shedule</button>
            </div>
            @Html.Hidden("fieldId", Model.Id)
            <div class="shedule" id="sheduleContainer">
              
            </div>
            <div>
                @Html.Partial("_ListCommentsPartial", Model.Comments);
            </div>
            <div class="row col-md-10 col-md-offset-1">
                @using (Html.BeginForm("Create", "Comment", new { }, FormMethod.Post, new { @class = "", role = "form" }))
                {
                    <div class="row form-group">
                        @Html.AntiForgeryToken()

                        <div class="col-md-offset-2 col-md-4">
                            @Html.TextArea("text", new { @class = "form-control", placeholder = "Text" })
                            @Html.Hidden("fieldId", Model.Id)
                        </div>
                        <div class="col-md-offset-2 col-md-4">
                            <input type="submit" class="btn btn-default btn-lg" value="Create Comment" />
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

@section scripts{
    <script type="text/javascript">
        $(function () {

            $(document).ajaxStart(function () {
                //show a progress modal of your choosing
                //showProgressModal('loading');
            });
            $(document).ajaxStop(function () {
                //hide it
                //hideProgressModal();
            });
            // AntiForgeryToken
            $("#shedule").on("click", function () {
                var data = {
                    date: new Date().toISOString(),
                    fieldId: Number.parseInt($("#fieldId").val())
                    }
                console.log(data);
                $.ajax({
                    url: '/Shedule/GetShedule',
                    data: data,
                    contentType: "application/json",
                    success: function (data) {
                        $('#sheduleContainer').html(data);
                    }
                });
            })
        });
    </script>
}